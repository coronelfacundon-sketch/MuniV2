<!DOCTYPE html><html lang="es"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>PF · Responsable Inscripto — Simulación</title><link rel="stylesheet" href="../assets/styles.css"></head><body>
<div class="wrap"><header class="header"><div class="brand"><div class="logo"></div><div class="title"><h1>PF · Responsable Inscripto</h1><p>Habilitación digital provisoria · 30 días — <a href="../index.html">Volver</a></p></div></div><div class="breadcrumbs"><a href="../index.html">Inicio</a> / PF · Responsable Inscripto</div></header>
<section class="grid"><div class="card"><div class="body"><h2>Formulario</h2>
<form id="form" novalidate>
<div class="row cols-3"><div><label>CUIT</label><input name="cuit" maxlength="11" required></div><div><label>Apellido y Nombre</label><input name="nombre" required></div><div><label>Email</label><input name="email" type="email" required></div></div>
<div class="row cols-3"><div><label>Teléfono</label><input name="telefono"></div><div><label>Domicilio comercial</label><input name="dom_com" required></div><div><label>Superficie (m²)</label><input name="sup" type="number" min="1" max="100"></div></div>
<div class="row cols-2"><div><label>Rubro</label><select name="rubro"><option value="">Seleccionar…</option><option>Servicios</option><option>Comercio</option><option>Gastronomía</option></select></div><div><label><input name="ddjj" type="checkbox"> Acepto DDJJ</label></div></div>
<div class="actions"><button type="submit" class="btn primary">Guardar y emitir constancia</button></div>
</form>
</div></div></section>
<footer>© 2025 · Simulación educativa.</footer></div>
<dialog id="dlg"><div class="modal-head"><strong>Municipalidad de Escobar — Simulación</strong><button class="btn" onclick="document.getElementById('dlg').close()">Cerrar</button></div>
<div class="modal-body"><div class="constancia" id="constancia"></div><div class="actions" style="justify-content:space-between"><span class="helper">Uso pedagógico</span><button class="btn" onclick="window.print()">Imprimir / PDF</button></div></div></dialog>
<script type="module">
import { $, K_PF_RI, loadSettings, validCUIT, validEmail, lsGet, lsSet, fmtRegistro, MiniQR } from "../assets/utils.js";
const form=$('#form');
form.addEventListener('submit', (e)=>{e.preventDefault(); const o=Object.fromEntries(new FormData(form).entries()); if(!validCUIT(o.cuit)) return alert('CUIT inválido'); if(!validEmail(o.email)) return alert('Email inválido'); if(!form.querySelector('[name=ddjj]').checked) return alert('Debés aceptar la DDJJ'); const s=loadSettings(); const rec={tipo:'PF-RI', nombre:o.nombre, cuit:o.cuit, email:o.email, telefono:o.telefono||'', rubro:o.rubro||'', sup:+o.sup||0, fecha:new Date().toISOString().slice(0,10), vencimiento:new Date(Date.now()+30*864e5).toISOString().slice(0,10), registro:fmtRegistro('PF-RI'), cerrado:true, meta:{curso:s.curso,docente:s.docente,version:s.version}}; const L=lsGet(K_PF_RI); L.push(rec); lsSet(K_PF_RI,L); show(rec); form.reset(); });
function show(data){ const s=loadSettings(); const div=$('#constancia'); div.innerHTML=`<h3>Habilitación digital provisoria — Simulación</h3><p><strong>N° de Registro:</strong> ${data.registro}</p><p><strong>Titular:</strong> ${data.nombre} · <strong>CUIT:</strong> ${data.cuit}</p><p><strong>Rubro:</strong> ${data.rubro||'—'} · <strong>Superficie:</strong> ${data.sup||'—'} m²</p><p><strong>Fecha:</strong> ${data.fecha} · <strong>Vencimiento:</strong> ${data.vencimiento}</p><div class='seal'><div class='qr' id='qrb'>QR</div><div class='meta'><div><strong>Sello:</strong> ${(s.prefijo||'ESCOBAR360')} · ${(s.year||'')} · ${(s.curso||'')} · ${(s.docente||'')} · ${(s.version||'')}</div><div><strong>Tipo:</strong> ${data.tipo}</div><div><strong>Estado:</strong> Provisorio — sujeto a inspección</div></div></div><div class='disclaimer'>Uso pedagógico. No corresponde a un trámite real.</div>`; new MiniQR($('#qrb')).make(JSON.stringify({r:data.registro,t:data.tipo,c:data.cuit,d:data.fecha})); document.querySelector('#dlg').showModal(); }
</script></body></html>
